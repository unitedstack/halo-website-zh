<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>HALO</title>
  <link rel="stylesheet" href="../assets/css/index.css" type="text/css" />
  <link rel="stylesheet" href="../assets/css/syntax.css" type="text/css" />
</head>
<body>
<header class="nav-header">
  <div class="inner-center">
    <a href="/" class="halo-logo"><img src="/img/halo-logo.png"></a>
    <ul class="breadcrumb">
      <li class="item"><a href="/framework/system-framework.html">架构</a></li>
      <li class="item"><a href="/started/started.html">快速开始</a></li>
      <li class="item"><a href="/develop/font-develop.html">开发</a></li>
      <li class="item"><a href="/about/about">关于</a></li>
    </ul>
    <p class="doc">文档中心</p>
  </div>
</header>

<header class="nav-header-mobile">
  <div class="inner-center-mobile">
    <div class="header-left">
        <a href="/" class="skip" ><img src="/img/halo-logo.png" class="logo"></a>
        <div id="x-open" class="x-wrapper">
          <div class="x-1"></div>
          <div class="x-2"></div>
        </div>
    </div>
    <ul id="header-center" class="header-center">
      <li class="multi-dropdown">
        <a href="javascript:void(0)" class="firsta">
          架构
          <i class="icon-arrow-down"><img src="/img/down.png"></i>
        </a>
        <div class="dropdown-wrapper">
          <ul class="dropdown">
            <li class="multi select">
              <a href="javascript:void(0)">
                介绍
                <i class="icon-arrow-down"><img src="/img/down.png"></i></i>
              </a>
              <ul class="child-dropdown">
                <li><a href="/framework/source">起源</a></li>
                <li><a href="/framework/idea">理念</a></li>
              </ul>
            </li>
            <li class="multi">
              <a href="javascript:void(0)">
                架构
                <i class="icon-arrow-down"><img src="/img/down.png"></i></i>
              </a>
              <ul class="child-dropdown">
                <li><a href="/framework/system-framework">系统架构</a></li>
                <li><a href="/framework/deploy-framework">部署架构</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </li>
      
      <li>
        <a href="javascript:void(0)" class="firsta">
          快速开始
          <i class="icon-arrow-down"><img src="/img/down.png"></i></i>
        </a>
        <div class="dropdown-wrapper">
          <ul class="dropdown">
            <li><a href="/started/started">快速开始</a></li>
            <li><a href="/started/deployment">服务器端部署</a></li>
            <li><a href="/started/scripts">更多命令</a></li>
          </ul>
        </div>
      </li>

      <li class="multi-dropdown">
        <a href="javascript:void(0)" class="firsta">开发
        <i class="icon-arrow-down"><img src="/img/down.png"></i></i></a>
        <div class="dropdown-wrapper">
          <ul class="dropdown">
            <li class="multi select">
              <a href="javascript:void(0)">
                配置<i class="icon-arrow-down"><img src="/img/down.png"></i></i>
              </a>
              <ul class="child-dropdown">
                <li><a href="/develop/config">环境配置</a></li>
                <li><a href="/develop/mirana">消息推送配置</a></li>
                <li><a href="/develop/menu">菜单配置</a></li>
                <li><a href="/develop/model">应用配置</a></li>
                <li><a href="/develop/popup">弹窗配置</a></li>
              </ul>
            </li>
            <li class="multi">
              <a href="javascript:void(0)">开发<i class="icon-arrow-down"><img src="/img/down.png"></i></i></a>
              <ul class="child-dropdown">
                <li><a href="/develop/font-develop">前端开发</a></li>
                <li><a href="/develop/after-develop">后端开发</a></li>
              </ul>
            </li>
            <li class="multi">
              <a href="javascript:void(0)">附录</a>
              <ul class="child-dropdown">
                <li><a href="/develop/learning-materials">研发学习资料</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </li>

      <li>
        <a href="javascript:void(0)" class="firsta">
          关于
          <i class="icon-arrow-down"><img src="/img/down.png"></i></i>
        </a>
        <div class="dropdown-wrapper">
          <ul class="dropdown">
            <li><a href="/about/about">关于我们</a></li>
            <li><a href="https://www.ustack.com/">有云官网</a></li>
          </ul>
        </div>
      </li>
    </ul>
  </div>
  <p class="mobile-doc">文档中心</p>
</header>
<div class="whole-page">
  <div class="site-page-slidebar">
    <div class="site-menu">
  
    <div class="site-menu-block">
      <div class="site-menu-links">
        
          <ul >
            <p class="slidebar-title">配置</p>
            
              <li >
                <a href=/develop/config.html>环境配置</a>
              </li>
            
              <li >
                <a href=/develop/mirana.html>消息推送配置</a>
              </li>
            
              <li >
                <a href=/develop/menu.html>菜单配置</a>
              </li>
            
              <li >
                <a href=/develop/model.html>应用配置</a>
              </li>
            
              <li >
                <a href=/develop/popup.html>弹窗配置</a>
              </li>
            
          </ul>
        
          <ul >
            <p class="slidebar-title">开发</p>
            
              <li >
                <a href=/develop/font-develop.html>前端开发</a>
              </li>
            
              <li >
                <a href=/develop/after-develop.html>后端开发</a>
              </li>
            
          </ul>
        
          <ul >
            <p class="slidebar-title">附录</p>
            
              <li >
                <a href=/develop/learning-materials.html>研发学习资料</a>
              </li>
            
          </ul>
        
      </div>
    </div>
  
</div>
    <div class="site-content">
      <h2 id="弹窗配置">弹窗配置</h2>

<p>弹窗是点击面板的按钮之后弹出的交互界面。一般分为默认弹窗的和自定义的弹窗，自定义的弹窗样式可以直接写入样式，在这里介绍默认弹窗为用config文件写出的界面，不需要额外写样式，以下是一个弹窗示例。</p>

<p style="text-align: center">
  <img src="../img/develop/popup.png" style="width: 400px" />
</p>

<p>视图部分的配置文件以<code class="highlighter-rouge">kunkka/halo/client/dashboard/modules/network/pop/create_network/config.json</code>文件举例。</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"create"</span><span class="p">,</span><span class="w"> </span><span class="s2">"prv_network"</span><span class="p">],</span><span class="w">      </span><span class="err">//弹窗的title，自动拼接i18n</span><span class="w">
  </span><span class="nt">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tip"</span><span class="p">,</span><span class="w">                         </span><span class="err">//提示提示框类型的组件</span><span class="w">
    </span><span class="nt">"tip_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"info"</span><span class="p">,</span><span class="w">                    </span><span class="err">//tip_type</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prv_info"</span><span class="w">                    </span><span class="err">//该组件label的i</span><span class="mi">18</span><span class="err">n，也是该组件的ref名称</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">                       </span><span class="err">//input类型的组件</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"network_name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_long_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">                  </span><span class="err">//是否长label类型</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checkbox"</span><span class="p">,</span><span class="w">                    </span><span class="err">//checkbox类型的组件</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enable_vlan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"checked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">                      </span><span class="err">//默认初始状态是否选中</span><span class="w">
    </span><span class="nt">"has_long_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vlan_id"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_long_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hide"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tip_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vlan_tip"</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checkbox"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enable_security"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"checked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"has_long_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checkbox"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create_subnet"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"checked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"has_long_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subnet_name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_long_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"net_address"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_long_label"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tip_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cidr_tip"</span><span class="p">,</span><span class="w">                </span><span class="err">//带有提示文字的input文字框</span><span class="w">
    </span><span class="nt">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">                       </span><span class="err">//是否为必填项，如果是且没有内容，则点击确认按钮会报错</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"btn"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">                     </span><span class="err">//确认按钮的i18n文字</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">                      </span><span class="err">//button的type，有create，delete，warning，cancel</span><span class="w">
    </span><span class="nt">"disabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">                       </span><span class="err">//默认初始状态是否禁用</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>逻辑部分的代码以<code class="highlighter-rouge">kunkka/halo/client/dashboard/modules/network/pop/create_network/index.js</code>文件举例。</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">commonModal</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'client/components/modal_common/index'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./config.json'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../../request'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">__</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'locale/client/dashboard.lang.json'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">pop</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>                <span class="c1">//parent为父级弹窗，callback回调函数需要在confirm之后执行</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">HALO</span><span class="p">.</span><span class="nx">settings</span><span class="p">.</span><span class="nx">is_show_vlan</span><span class="p">)</span> <span class="p">{</span>            <span class="c1">//根据情况判断vlan_id组件是否隐藏</span>
    <span class="nx">config</span><span class="p">.</span><span class="nx">fields</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">hide</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">props</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">__</span><span class="p">:</span> <span class="nx">__</span><span class="p">,</span>                                     <span class="c1">//i18n对象</span>
    <span class="na">parent</span><span class="p">:</span> <span class="nx">parent</span><span class="p">,</span>                             <span class="c1">//父级弹窗，若没有可以写null</span>
    <span class="na">config</span><span class="p">:</span> <span class="nx">config</span><span class="p">,</span>                             <span class="c1">//等同于上面的config.json</span>
    <span class="na">onInitialize</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">refs</span><span class="p">)</span> <span class="p">{},</span>            <span class="c1">//初始化时需要的逻辑写入onInitialize函数，refs为config中所有组件的引用组合</span>
    <span class="na">onConfirm</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">refs</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>             <span class="c1">//在点击确认按钮之后的逻辑</span>
      <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>                              <span class="c1">//点击onConfirm之后确认按钮会变成disabled状态，并且执行该函数的代码</span>
        <span class="na">name</span><span class="p">:</span> <span class="nx">refs</span><span class="p">.</span><span class="nx">network_name</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">value</span>
      <span class="p">};</span>

      <span class="cm">/*
        省略代码
      */</span>

      <span class="nx">request</span><span class="p">.</span><span class="nx">createNetwork</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">callback</span> <span class="o">&amp;&amp;</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">network</span><span class="p">);</span>
        <span class="nx">cb</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>                              <span class="c1">//onConfirm有cb参数：当传递true时关闭弹窗；若传递false，确认按钮变成非disabled状态，可以重新点击</span>
      <span class="p">});</span>
    <span class="p">},</span>
    <span class="na">onAction</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">refs</span><span class="p">)</span> <span class="p">{</span>   <span class="c1">//field为当前发生变化的组件名称，status为当前发生变化的组件的value，refs为所有组件的引用组合</span>
      <span class="kd">var</span> <span class="nx">subnetChecked</span> <span class="o">=</span> <span class="nx">refs</span><span class="p">.</span><span class="nx">create_subnet</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s1">'create_subnet'</span><span class="p">:</span>                <span class="c1">//以下代码为当create_subnet组件值发生变化时其他组件的视图如何变化</span>
          <span class="nx">refs</span><span class="p">.</span><span class="nx">subnet_name</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
            <span class="na">hide</span><span class="p">:</span> <span class="o">!</span><span class="nx">subnetChecked</span>
          <span class="p">});</span>
          <span class="nx">refs</span><span class="p">.</span><span class="nx">net_address</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
            <span class="na">hide</span><span class="p">:</span> <span class="o">!</span><span class="nx">subnetChecked</span>
          <span class="p">});</span>
          <span class="nx">refs</span><span class="p">.</span><span class="nx">btn</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
            <span class="na">disabled</span><span class="p">:</span> <span class="nx">subnetChecked</span>
          <span class="p">});</span>
          <span class="k">break</span><span class="p">;</span>

        <span class="cm">/*
          省略代码
        */</span>

        <span class="nl">default</span><span class="p">:</span>
          <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">commonModal</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>                       <span class="c1">//把参数传给commonModal执行</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">pop</span><span class="p">;</span>
</code></pre>
</div>

<p>更多组件和属性可以在<code class="highlighter-rouge">kunkka/halo/client/components/modal_common/subs</code>中查看。</p>

      <div class="docs-prevnext">
        
        
      </div>
    </div>
  </div>
</div>
<footer class="nav-footer">
  <section class="sitemap">
  <div class="left">
    <a href="https://www.ustack.com" class="skip" ><img src="../img/footer-ustack-logo.png" class="ustack-logo"></a>
    <a href="/" class="skip" ><img src="../img/footer-halo-logo.png" class="halo-logo"></a>
    <p class="copyright">Copyright © 2017</p>
    <p class="underline">MIT License</p>
  </div>
  <div class="right">
    <div>
      <h5>架构</h5>
      <a href="/framework/source.html">起源</a>
      <a href="/framework/idea.html">理念</a>
      <a href="/framework/system-framework.html">系统架构</a>
      <a href="/framework/deploy-framework.html">部署架构</a>
    </div>
    <div>
      <h5>快速开始</h5>
      <a href="/started/started.html">快速开始</a>
      <a href="started/deployment.md">服务器端部署</a>
      <a href="/started/scripts.html">更多命令</a>
    </div>
    <div>
      <h5>配置</h5>
      <a href="/develop/config.html">环境配置</a>
      <a href="/develop/mirana.html">消息推送配置</a>
      <a href="/develop/menu.html">菜单配置</a>
      <a href="/develop/model.html">应用配置</a>
      <a href="/develop/popup.html">弹窗配置</a>
    </div>
    <div>
      <h5>开发</h5>
      <a href="/develop/font-develop.html">前端开发</a>
      <a href="/develop/after-develop.html">后端开发</a>
      <a href="/develop/learning-materials.html">研发学习资料</a>
    </div>
    <div>
      <h5>公司</h5>
      <a href="/react/blog/"></a>
      <a href="/about/about">关于我们</a>
      <a href="https://www.ustack.com/">有云官网</a>
    </div>
  </div>
  </section>
</footer>

<footer class="mobile-footer">
  <ul>
    <li><a href="/framework/system-framework.html">架构</a></li>
    <li><a href="/started/started.html">快速开始</a></li>
    <li><a href="/develop/font-develop.html">开发</a></li>
    <li><a href="/about/about">关于</a></li>
    <li><a href="https://www.ustack.com/">有云官网</a></li>
  </ul>
  <div class="identification">
    <p class="copyright">Copyright © 2017</p>
    <p class="underline">MIT License</p>   
  </div>
</footer>
<script src="../js/jquery-3.2.1.min.js"></script>
<script src="../js/control.js"></script>

</body>
</html>